# MyBatis数据源模块分析

前提

```xml
常见的数据源组件都实现了javax.sql.DataSource接口
MyBatis不但要能集成第三方的数据源组件，自身也提供了数据源的实现
一般情况下，数据源的初始化过程参数较多，比较复杂
```

使用工厂模式创建对象

```xml
工厂模式属于创建型设计模式，它提供了一种创建对象的方式。定义一个创建对象的接口，让其子类自己决定实例化哪一个工厂类，工厂模式使其创建过程延迟到子类进行。
```

创建对象的方式

```xml
1.通过反射创建对象
2.使用new关键字直接创建对象
上述两个存在的缺点：
	对象创建和对象使用耦合在一起，违反单一原则
	当业务扩展时，必须修改代码业务。违反了开闭原则
3.通过工厂类创建对象
	优点：
		把对象的创建和使用分开，对象创建和对象使用解耦
		如果创建对象的过程很复杂，创建过程统一到工厂里管理，即减少了重复代码，也方便以后对创建过程的修改维护
		当业务扩展时，只需要增加工厂子类，符合开闭原则
```

各个类的作用

```xml
PooledConnection：使用动态代理封装了真正的数据库连接对象。
PoolState：用于管理PooledConnection对象状态的组件，通过两个list分别管理空闲状态的连接资源和活跃状态的连接资源。
PooledDataSource：一个简单，同步的，线程安全的数据库连接池。
```

