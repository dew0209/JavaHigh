**数据库的基本概念**

```xml
组成：
	数据定义语言(DDL)：其语句包括动词create,alter和drop。用于描述数据库中各种对象的结构。
	数据操作语言(DML)：包括动词select,insert,update和delete。用于对数据库中数据的日常维护。
	数据控制语言(DCL)：包括grant语句和revoke等语句。用于维护数据库的安全性，完整性和事物控制。
	事物处理语言(TPL)：TPL语句能确保被DML语句影响的表的所有行及时得以更新。TPL语句包括begin transaction,commit和rollback。
	指针控制语言(CCL)：CCL语句，向declare cursor,fetch into和update where current用于对一个或多个表单独行的操作。
```

**概念模型的表示方法**

```xml
ER图(实体联系图)
	1.实体：是指客观世界中存在并且可以相互区分的事物
	2.属性：是指实体的所具有的某一特征
	3.码(key)：是指唯一标识实体的属性集。例如职工号是职工实体的码
	4.域：是指属性的取值范围。
	5.实体型：具有相同属性的实体必然具有共同的特征和性质，用实体名及其属性名集合来抽象和刻画这些实体，称为实体型。例如：职工(职工号，姓名，性别，年龄，学历，部门)就是一个实体型
	6.实体集：同型实体的集合称为实体集。例如：全体职工就是一个实体集
	7.联系：实体(型)内部的联系和实体(型)之间的联系。实体内部的联系通常是指组成实体的各属性之间的联系。实体之间的联系通常是指不同实体型之间的联系。
		两个实体型之间的联系通常有3种：1对1，1对多，多对多
```

**ER模型设计步骤**

```xml
1.划分和确定实体
2.划分和确定联系
3.确定属性
4.画出E-R模型
5.优化E-R模型
```

**数据模型的要素**

```xml
数据结构：主要描述数据的类型，内容，性质以及数据间的联系等，是对系统静态特征的描述
数据操作：主要描述在相应的数据结构上的操作类型和操作方式，是对系统动态特征的描述
数据的约束条件：主要描述数据结构内数据间的语法，词义联系，它们之间的制约和依存关系，以及数据动态变化的规则，以保证数据的正确，有效和相容
层次模型
网状模型
关系模型
	关系模型的数据结构：二维表结构
    常见术语：
      关系：一个关系对应着一张二维表，二维表就是关系名
      元组：表中的一行就是一个元组
      属性：表种的一列称为一个属性，列的值就是属性值，属性值的取值范围为域
      分量：没一行对应的列的属性值，即元组种的一个属性值
      关系模式：对关系的描述称为关系模式。一般标识为关系名(属性1，属性2，属性3,...,属性n)
      候选键或候选码：关系种存在多个属性或属性集都能用来唯一标识该关系的元组，则这些属性或属性集称为关系的候选键或候选码
      主键或主码：在一个关系的若干候选键中指定一个用来唯一标识该关系的元组，则称这个被指定的候选键称为主关键字，或简称为主键，关键字，主码。
      主属性和非主属性：包含在任何一个候选键中的属性称为主属性，不包含在任何一个候选键中的属性称为非主属性
      外键和外码：关系中的某个属性或属性集虽然不是该关系的主键，或者只是主键的一部分，但它却是别的关系的主键时，则称其外键或外码
		关系模型的数据操作与完整性约束：
			实体完整性规则：该规则要求关系中的元组在组成主键的属性上不能有空值，且不能出现重复值
			域完整性：是对数据表中字段属性的约束
			参照完整性：该规则用于约束相关联的数据表间的数据要保持一致，建立外键的目的就是为了实现参照完整性，为了保证数据的一致性
			用户定义的完整性规则：这是针对某一具体数据库的约束条件并由相关的应用关键而定
面对对象模型
```

**关系数据库的规范化**

```xml
范式：
	是符合某一种级别的关系模式的集合，是衡量关系模式规范化程度的标准，符合标准的关系才是规范化的。
	1nf：如果关系模式R中所有属性都是不可分解的，则称该关系模式R满足第一范式
	2nf：如果一个关系模式R是1nf，且R中的每一个非主属性都能完全依赖于码，则称该关系模式R满足第二范式。
	3nf：如果一个关系模式R是2nf，且R中的每个非主属性都不传递函数依赖于码，则称该关系模式R满足第三范式。
```

**分布式系统一致性问题**

```xml
分布式系统中(特别是NoSQL数据库)，数据多副本产生的一致性问题。
概念上的差别：
	ACID的一致性：强调（一个或多个）事物前后，数据的状态（约束，完整性等）都是有效的
	CAP中的一致性：强调多个副本是状态一致，同步更新的
		c：一致性
		A：可用性
		P：分区容错性
	BASE中的一致性：指分布式系统在出现故障的时候，允许损失部分可用性，即保证核心可用，和ACID中的一致性相近，但强调弱一致性（最终一致性）
```

**MySQL**

```xml
优势：
	成本低
	性能良好
	值得信赖
	简单操作
	兼容性好
```

**MySQL数据库文件**

```xml
MySQL数据库文件有.frm,.myd和.myi等3种文件，其中.frm是描述表结构的文件，.myd是表的数据文件，.myi是表的数据文件，.myi是表数据文件种的索引文件
.frm文件：存储数据表的框架结构，文件名与表名相同，每个表对应一个同名frm文件，与操作系统和存储引擎无关，即不管MySQL允许在何种操作系统上，使用何种存储引擎，都有这个文件。除了必有的.frm文件，根据MySQL所使用的存储引擎不同，存储引擎会创建各自不同的数据文件。
对于MyISAM，其索引和数据是分开的，索引文件后缀名是MYD，数据文件后缀名是MYI
对于Inoodb，索引和数据都在同个文件，ibdata
```

**字符集**

```xml
MySQL服务器默认的字符是latin1.MySQL的字符集支持可以细化到4个层次：
	服务器，数据库，数据表，连接层
如果不进行设置，那么连接层级，客户端级和结果返回级，数据库级，表级，字段级都默认使用iatin1字符集。
```

**标识符**

```xml
标识符用来命名一些对象，其通用命名规则是：标识符由以字母或下划线开头的字母，数字或下划线序列组成。对于标识符是否区分大小写取决于当前的操作系统。windows下是不敏感的，但对于大多数linux\unix系统来说，这些标识符大小写是敏感的。
关键字，MySQL的关键字众多，不同版本的MySQL语言关键词也略有变化，MySQL5.7大约有400个左右关键词。所有关键字有自己特定的含义，经量避免作为标识符。
```

**常量**

```xml
字符串常量
	字符串是指用单引号或双引号括起来的字符序列，分为ASCII字符串常量和Unicode字符串常量
ASCII：
	"hello" "how are you"
Unicode:
	前面必须有一个N标识符。N前缀必须为大写，只能用单引号括起字符串，例如：N 'hello' N 'How are you'
Unicode数据中的每个字符用两个字节存储，而每个ASCII字符用一个字节存储
```

**转义序列**

```xml
每个转义序列以一个反斜杠("\")开始，指出后面的字符使用转义字符来解释，而不是普通的字符，注意nul字节与null值不同，nul为一个零值字节，而null代表没有值。
```

| 序列 |         含义         |
| :--: | :------------------: |
|  \0  | 一个ASCII 0(nul)字符 |
|  \n  |      一个换行符      |
|  \r  |      一个回车符      |
|  \t  |      一个定位符      |
|  \b  |      一个退格符      |
|  \Z  |  一个ASCII 26 字符   |
| \ '  |      一个单引号      |
| \ "  |      一个双引号      |
| \ \  |      一个反斜线      |
|  \%  |        一个%         |
| \ _  |        一个_         |

**常量**

```xml
有以下几种方式可以在字符串中包括引号
	1.在字符串内用单引号 ' 引用的单引号 ' 可以写成''
	2.在字符串内用双引号 " 引用的双引号 “ 可以写 ""
	3.可以在引号前加转义字符 \
	4.在字符串内用 ” 引用 ‘ 不需要特殊处理，不需要用双字符或转义。反之亦然
select "hello",'hello','"hello"',"'hello'",'"111','he""llo',"hel""lo";

数值常量：
	数值常量可以分为整数常量和浮点数常量

十六进制常量
	其最前面有一个大写字母’X‘或小写字母'x'
	十六进制默认是字符串，如果想确保该值作为数字处理，可以使用CAST(...AS UNSIGNED)
	select 0x41,cast(0x41 as UNSIGNED );-- 默认就是字符串，不用额外加''

日期时间常量
	用单引号将表示日期时间的字符串括起来构成
	1.日期型常量包括年，月，日，数据类型为DATE，按年-月-日的顺序表示，中间的-，也可以使用\ @ %等特殊符号。"2021-09-27
	2.时间型常量：包括小时，分钟，秒及微妙数，数据类型为TIME，按时:分:秒:微妙的顺序表示
	3.位字段值：可以使用b'value'符号写位字段值，value是一个用0和1写成的二进制值。直接显示b'value'的值可能是一系列特殊的符号。使用BIN函数可以将位字段常量显示位二进制格式。使用OCT函数可以将位字段常量显示数值型格式。
	select BIN(b'110' + 0),OCT(b'110' + 0),b'110';
	110   6   1B0000000006    
	直接使用不行select BIN(b'110'),OCT(b'110'),b'110';
布尔值
	布尔值只包含两个可能的值:TRUE和FALSE。FALSE的数字值位0，TRUE的数字值位1
NULL值
	NULL值可适用于各种列的类型，它通常用来表示”没有值“，”误数据“等意义，并且不同于数字类型0或字符串类型的空字符串
```

**变量**

```xml
1.用户变量
	用户可以在表达式中使用自己定义的变量，这样的变量叫做用户变量
	在使用用户变量前必须定义和初始化，若无初始化，则为null
	用户变量与连接有关，一个客户端定义的变量不能被其它客户端看到或者使用
	set @用户变量 = expr1[,@用户变量2 = expr2,...];-- 定义用户变量  
	expr要给变量赋的值，可以是常量，变量或表达式
	set @m = (select title from t_blog where id = 1);-- 将查询的结果赋值给变量，必须要是一行一列的结果才行
	说明：在select语句中，表达式发送到客户端后才进行计算，这说明在having，Group by 或orderby子句中，不能使用包含select列表中所设的变量的表达式
2.系统变量[用户不能定义，系统定义的变量]
	和用户变量一样，系统变量也是一个值和一个数据类型，但不同的是，系统变量在mysql服务器启动时就被引入并初始化为默认值
	select @@version;-- 查看mysql的版本号
	说明：大多数的系统变量应用与其他sql语句中时，必须加两个@@符号[用户自定义和系统定义的]，某些时候需要省略[一般都是系统自己定义的，current_time等]
	set 系统变量名 = expr | [global | session] 系统变量名 = expr | @@[global. | session.] 系统变量名 = expr
	说明：指定了global或@@global.关键字的是全局系统变量。指定了session或@@session.关键字的则为会话系统变量。如果在使用系统变量时不指定关键字，默认为会话系统变量
	2.1 全局系统变量
		当mysql启动的时候，全局系统变量就初始化了
	2.2 会话系统变量
		会话系统变量只适用于当前的会话。大多数会话系统变量的名字和全局系统变量的名字相同。当启动会话的时候，每个会话系统变量都和同名的全局系统变量的值相同。一个会话系统变量的值是可以改变的，但是这个新的值只使用正在运行的会话，不适用于所有其他会话
	show variables ;-- 得到系统变量清单
	show global variables ;-- 得到全局系统变量清单
	show session variables;-- 得到会话系统变量清单
	要获得与样式匹配的具体的变量名称或者名称清单，需使用like关键字
```

**数据类型**

```xml
1.整数类型
数据类型				字节数
tinyint 				1
smallint        2
mediumint       3
int							4
bigint					8

2.浮点数类型和定点数类型
数据类型        字节数
float           4
double          8
decimal(m,d)    m+2

3.日期与时间类型
数据类型				字节数    日期格式
year						1					YYYY
date						4					YYYY-MM-DD
time						3					HH:MM:SS
datetime				8					YYYY-MM-DD HH:MM:SS
timestamp				4					YYYY-MM-DD HH:MM:SS
说明：如果插入的数值不合法，系统会自动将对应的零值插入数据库中。
	3.1 year  表示年份
			使用4位字符串或者数字表示 [1901,2155]
			使用2位字符串表示 [00,99]
			使用2位数字表示 [1,99]
	3.2 date 日期值
			以'YYYY-MM-DD' 或者 'YYYYMMDD' 字符串格式表示
			以'YY-MM-DD' 或者 'YYMMDD' 字符串格式表示
			以YY-MM-DD或者YYMMDD数字格式表示
			使用CURRENT_DATE或者now()表示当前系统日期
	3.3 time类型 时间值
			以 'D HH:MM:SS'字符串格式表示
			以 'HHMMSS' 字符串格式或者HHMMS数字格式表示
			使用CURRENT_TIME或者now()输入当前系统时间
	3.4 datetime类型 日期和时间
			以 'YYYY-MM-DD HH:MM:SS' 或者 'YYYYMMDDHHMMSS'字符串格式表示日期和时间
			以 'YY-MM-DD HH:MM:SS' 或者 'YYMMDDHHMMSS' 字符串格式表示的日期和时间
			以YYYYMMDDHHMMSS或者YYMMDDHHMMSS数字格式表示日期和时间
			使用now来输入当前系统的日期和时间
	3.5 timestamp 日期和时间  取值范围比datetime小
			使用current_timestamp来输入系统当前日期和时间
			输入null时，系统会输入系统当前日期和时间
			无任何输入时，系统会输入系统当前日期和时间
```

